{"version":3,"sources":["webpack:///./web/va/VaLogin.jsx","webpack:///./web/va/style/va-login.less?e974","webpack:///./web/va/style/va-login.less","webpack:///./web/va/VaLoginTopbar.jsx"],"names":[],"mappings":"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","file":"js/login.js","sourcesContent":["import PolyfillBind from './../polyfill-bind'\n\nimport ConsolePolyfill from 'console-polyfill'\nimport React from 'react'\nimport QueryString from 'query-string'\nimport Bacon from 'baconjs'\n\nimport style from '../form/style/main.less'\nimport loginStyle from './style/va-login.less'\n\nimport VaLoginTopbar from './VaLoginTopbar.jsx'\nimport VaUrlCreator from './VaUrlCreator.js'\n\nimport FormUtil from '../form/FormUtil.js'\nimport HttpUtil from '../form/HttpUtil'\nimport SyntaxValidator from '../form/SyntaxValidator.js'\nimport LocalizedString from '../form/component/LocalizedString.jsx'\nimport EmailTextField from '../form/component/EmailTextField.jsx'\nimport TextButton from '../form/component/TextButton.jsx'\nimport {DateRangeInfoElement, H1InfoElement} from '../form/component/InfoElement.jsx'\nimport HelpTooltip from '../form/component/HelpTooltip.jsx'\n\nexport default class VaLogin extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = {\n      email: \"\",\n      sent: \"\",\n      error: \"\"\n    }\n  }\n\n  handleEmailChange(event) {\n    this.setState({\n      email: event.target.value,\n      sent: \"\"\n    })\n  }\n\n  submit(event) {\n    event.preventDefault()\n    if (SyntaxValidator.validateEmail(this.state.email)) {\n      return\n    }\n    const url = urlCreator.newEntityApiUrl(this.props.model)\n    const vaLogin = this\n    const email = this.state.email\n    const model = this.props.model\n    try {\n      HttpUtil.put(url, {\n        value: [{key:\"primary-email\", value: email},{key:\"language\", value: model.lang}]\n      })\n      .then(function(response) {\n        vaLogin.setState({\n          sent: email,\n          error: \"\"\n        })\n        console.log(\"Hakemus created. Response=\", JSON.stringify(response))\n        const hakemusId = response.id\n        if(hakemusId) {\n          window.location = urlCreator.existingSubmissionEditUrl(model.avustushaku.id, hakemusId, model.lang, model.devel)\n        }\n      })\n      .catch(function(response) {\n        console.error(\"PUT error to\", url, \". Response=\", JSON.stringify(response))\n        vaLogin.setState({\n          error: \"error\"\n        })\n      })\n    }\n    catch(error) {\n      console.error(\"PUT error to\", url, \". Error=\", error)\n      vaLogin.setState({\n        error: \"error\"\n      })\n    }\n  }\n\n  render() {\n    const model = this.props.model\n    const lang = model.lang\n    const translations = model.translations\n    const content = model.avustushaku.content\n    const email = this.state.email\n    const sent = this.state.sent\n    const error = this.state.error\n    const emailIsInvalid = () => SyntaxValidator.validateEmail(this.state.email) && this.state.email != \"\"\n    const canSend = () => email === sent || emailIsInvalid()\n\n    return <div>\n      <VaLoginTopbar translations={translations} lang={lang} />\n      <section id=\"container\" className=\"soresu-fieldset\">\n        <H1InfoElement htmlId=\"name\" lang={lang} values={content} />\n        <DateRangeInfoElement htmlId=\"duration\" translations={translations} translationKey=\"label\" lang={lang} values={content} />\n        <h2><LocalizedString translations={translations.login} translationKey=\"heading\" lang={lang} /><HelpTooltip content={translations.login.help} lang={lang}/></h2>\n        <form onSubmit={this.submit.bind(this)}>\n          <EmailTextField htmlId=\"primary-email\" hasError={emailIsInvalid()} onChange={this.handleEmailChange.bind(this)} translations={translations.login} value={email} translationKey=\"contact-email\" lang={lang} required=\"true\" size=\"small\" maxLength=\"80\" />\n          <TextButton htmlId=\"submit\" disabled={canSend()} onClick={this.submit.bind(this)} translations={translations.login} translationKey=\"submit\" lang={lang} />\n          <div className=\"message-container\">\n            <LocalizedString hidden={sent === \"\"} className=\"message\" translations={translations.login} translationKey=\"message\" lang={lang} />\n            <LocalizedString hidden={error === \"\"} className=\"error\" translations={translations.errors} translationKey=\"unexpected-submit-error\" lang={lang} />\n          </div>\n        </form>\n      </section>\n    </div>\n  }\n}\n\nconst urlCreator = new VaUrlCreator()\nconst query = QueryString.parse(location.search)\nconst translationsP = Bacon.fromPromise(HttpUtil.get(\"/translations.json\"))\nconst avustusHakuId = VaUrlCreator.parseAvustusHakuId({ parsedQuery: query, location: location })\nconst avustusHakuP = Bacon.fromPromise(HttpUtil.get(urlCreator.avustusHakuApiUrl(avustusHakuId)))\n\nconst initialStateTemplate = {\n  translations: translationsP,\n  lang: query.lang || \"fi\",\n  devel: query.devel,\n  avustushaku: avustusHakuP\n}\nconst initialState = Bacon.combineTemplate(initialStateTemplate)\n\ninitialState.onValue(function(state) {\n  const properties = { model: state }\n  React.render(React.createElement(VaLogin, properties), document.getElementById('app'))\n})\n\n\n\n/** WEBPACK FOOTER **\n ** ./web/va/VaLogin.jsx\n **/","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./va-login.less\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!./../../../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./va-login.less\", function() {\n\t\t\tvar newContent = require(\"!!./../../../node_modules/css-loader/index.js!./../../../node_modules/less-loader/index.js!./va-login.less\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./web/va/style/va-login.less\n ** module id = 383\n ** module chunks = 1\n **/","exports = module.exports = require(\"./../../../node_modules/css-loader/lib/css-base.js\")();\n// imports\n\n\n// module\nexports.push([module.id, \"#topbar {\\n  width: 100%;\\n  height: 120px;\\n  background-color: #fff;\\n  position: fixed;\\n  top: 0;\\n  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.1);\\n  z-index: 100;\\n}\\n#topbar #logo {\\n  margin: 20px 70px 0 20px;\\n  float: left;\\n}\\n#topbar h1 {\\n  margin: 39px 30px 0 0;\\n  float: left;\\n  font-size: 22px;\\n  font-weight: normal;\\n  text-transform: uppercase;\\n  display: block;\\n  text-align: right;\\n  max-width: 300px;\\n}\\n#topbar #form-controls {\\n  margin-top: 28px;\\n  float: left;\\n  border-left: 1px solid #d9d9d9;\\n  height: 58px;\\n  padding-left: 20px;\\n}\\n#topbar #form-controls .status {\\n  float: left;\\n  min-width: 180px;\\n  margin-top: 15px;\\n  padding-right: 20px;\\n  font-size: 13px;\\n}\\n#topbar #form-controls #form-error-summary {\\n  font-size: 13px;\\n  padding-left: 200px;\\n  clear: left;\\n}\\n#topbar #form-controls button {\\n  margin-top: 5px;\\n}\\n#topbar #server-error {\\n  float: left;\\n  color: #c9302c;\\n}\\n#top-container {\\n  width: 1300px;\\n  margin-left: auto;\\n  margin-right: auto;\\n}\\n#container h2 {\\n  margin-top: 40px;\\n}\\n#container .required:after {\\n  content: \\\" *\\\";\\n}\\n#container label:after {\\n  content: \\\" \\\";\\n}\\n#container .message-container {\\n  display: inline-block;\\n  vertical-align: top;\\n  width: 160px;\\n  height: 40px;\\n  font-size: 12px;\\n}\\n#container .message {\\n  color: #00973a;\\n}\\n#container .error {\\n  color: #c9302c;\\n}\\n\", \"\"]);\n\n// exports\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/css-loader!./~/less-loader!./web/va/style/va-login.less\n ** module id = 384\n ** module chunks = 1\n **/","import React from 'react'\n\nimport LocalizedString from '../form/component/LocalizedString.jsx'\n\nexport default class VaLogin extends React.Component {\n  constructor(props) {\n    super(props)\n  }\n\n  render() {\n    return <section id=\"topbar\">\n      <div id=\"top-container\">\n        <img id=\"logo\" src=\"img/logo.png\"/>\n        <h1 id=\"topic\"><LocalizedString translations={this.props.translations.form} translationKey=\"heading\" lang={this.props.lang}/></h1>\n      </div>\n    </section>\n  }\n}\n\n\n/** WEBPACK FOOTER **\n ** ./web/va/VaLoginTopbar.jsx\n **/"],"sourceRoot":""}